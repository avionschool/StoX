<h1><%= current_user.name %>'s Portfolio</h1>

<h2>Search Stocks</h2>
<%= form_tag search_stock_path, method: :get do %>
  <%= text_field_tag :stock, params[:stock], placeholder: "Stock ticker symbol", autofocus: true %>
  <%= button_tag type: :submit do %>
    <%= 'Search' %>
  <% end %>
<% end %>

<% if @stock %>
  <h3>Stock Info</h3>
  Symbol: <%= @stock.ticker %>
  Name: <%= @stock.name %>
  Price: <%= @stock.latest_price %>
  <%= link_to 'Add', user_stocks_path(user: current_user, ticker: @stock.ticker), method: :post %>
<% end %>
<br>

<% if !@tracked_stocks.empty? %>
  <table>
    <thead>
      <tr>
        <th>Ticker</th>
        <th>Name</th>
        <th>Price</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @tracked_stocks.each do |stock| %>
        <tr>
          <td><%= stock.ticker %></td>
          <td><%= stock.name %></td>
          <td><%= stock.latest_price %></td>
          <td><%= 'Action placeholder' %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>

<%= link_to 'Back to Home', root_path %>
